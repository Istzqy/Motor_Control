/**
 ****************************************************************************************************
 * @file        norflash.h
 * @author      正点原子团队(ALIENTEK)
 * @version     V1.0
 * @date        2023-06-12
 * @brief       NOR Flash驱动代码
 * @license     Copyright (c) 2020-2032, 广州市星翼电子科技有限公司
 ****************************************************************************************************
 * @attention
 * 
 * 实验平台:正点原子 北极星 H750开发板
 * 在线视频:www.yuanzige.com
 * 技术论坛:www.openedv.com
 * 公司网址:www.alientek.com
 * 购买地址:openedv.taobao.com
 * 
 ****************************************************************************************************
 */

#ifndef __NORFLASH_H
#define __NORFLASH_H

#include "./SYSTEM/sys/sys.h"

/* NOR Flash芯片ID定义 */
#define W25Q80                      0xEF13
#define W25Q16                      0xEF14
#define W25Q32                      0xEF15
#define W25Q64                      0xEF16
#define W25Q128                     0xEF17
#define W25Q256                     0xEF18

/* NOR Flash指令定义 */
#define NORFLASH_WriteEnable        0x06
#define NORFLASH_ReadStatusReg1     0x05
#define NORFLASH_ReadStatusReg2     0x35
#define NORFLASH_ReadStatusReg3     0x15
#define NORFLASH_WriteStatusReg1    0x01
#define NORFLASH_WriteStatusReg2    0x31
#define NORFLASH_WriteStatusReg3    0x11
#define NORFLASH_ManufactDeviceID   0x90
#define NORFLASH_FastReadQuadIO     0xEB
#define NORFLASH_PageProgram        0x02
#define NORFLASH_ChipErase          0xC7
#define NORFLASH_SectorErase        0x20

/* 函数声明 */
void norflash_init(void);                                               /* 初始化NOR Flash */
uint16_t norflash_read_id(void);                                        /* 读NOR Flash芯片ID */
void norflash_read(uint8_t *pbuf, uint32_t addr, uint16_t datalen);     /* 读NOR Flash */
void norflash_write(uint8_t *pbuf, uint32_t addr, uint16_t datalen);    /* 写NOR Flash */
void norflash_erase_chip(void);                                         /* 擦除整个NOR Flash芯片 */
void norflash_erase_sector(uint32_t saddr);                             /* 擦除NOR Flash一个扇区 */

#endif
